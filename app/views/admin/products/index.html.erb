<div class="overflow-x-auto" id="admin-products-index">
  <%= turbo_frame_tag "products_table" do %>
    <div data-controller="products-table">
      <table class="min-w-full bg-white border border-pink-200 rounded-lg shadow-lg relative">
        <thead class="bg-pink-100">
          <tr>
            <th class="py-3 px-4 border-b border-pink-200 text-pink-700 text-left">Imagem</th>
            <th class="py-3 px-4 border-b border-pink-200 text-pink-700 text-left">ID</th>
            <th class="py-3 px-4 border-b border-pink-200 text-pink-700 text-left">Nome</th>
            <th class="py-3 px-4 border-b border-pink-200 text-pink-700 text-left">Pre√ßo</th>
            <th class="py-3 px-4 border-b border-pink-200 text-pink-700 text-left">Criado em</th>
          </tr>
        </thead>
        <tbody>
          <tr id="products-table-loading-flydown" data-products-table-target="loading" class="overflow-hidden transition-all duration-500 ease-in-out h-0 opacity-0 pointer-events-none">
            <td colspan="5" class="p-0">
              <div class="flex justify-center items-center gap-3 text-pink-700 font-semibold bg-white border-b border-pink-200 shadow min-h-0" style="height:0;">
                <span class="material-icons animate-spin text-pink-500 text-3xl">autorenew</span>
                <span>Carregando...</span>
              </div>
            </td>
          </tr>
          <% @products.each do |product| %>
            <tr id="products-table-content-row" data-products-table-target="row" class="border-b border-pink-100 hover:bg-pink-50 transition-colors">
              <td class="py-2 px-4">
                <% if product.images.attached? %>
                  <%= image_tag url_for(product.images.first.variant(resize_to_limit: [60, 60]).processed), class: "rounded border-2 border-pink-300 w-16 h-16 object-cover shadow" %>
                <% else %>
                  <span class="text-gray-400">Nenhuma imagem</span>
                <% end %>
              </td>
              <td class="py-2 px-4 font-mono text-gray-700"><%= product.id %></td>
              <td class="py-2 px-4 font-semibold text-gray-800"><%= product.name %></td>
              <td class="py-2 px-4 text-pink-700 font-bold"><%= product.price.format %></td>
              <td class="py-2 px-4 text-gray-500"><%= l(product.created_at, format: :short) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <div class="mt-6 flex justify-center">
        <%= paginate @products, params: { turbo_frame: "products_table" } %>
      </div>
    </div>
  <% end %>
</div>
