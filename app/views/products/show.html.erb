<div
  class="grid grid-cols-1 md:grid-cols-2 gap-6"
  data-controller="gallery"
  data-gallery-images-value="<%= json_escape(@product.images.map { |img| url_for(img) }.to_json) %>"
>
  <div class="flex flex-col gap-4">
    <!-- Carousel with navigation -->
    <div class="relative">
      <button
        type="button"
        class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-70 p-2 rounded-full shadow hover:bg-opacity-100 z-10"
        data-action="gallery#previous"
      >
        ◀
      </button>

      <%= image_tag(
        @product.images.first || "https://via.placeholder.com/300",
        alt: @product.name,
        class: "w-full rounded-lg max-w-96 max-h-96",
        data: { gallery_target: "mainImage" }
      ) %>

      <button
        type="button"
        class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-70 p-2 rounded-full shadow hover:bg-opacity-100 z-10"
        data-action="gallery#next"
      >
        ▶
      </button>
    </div>

    <!-- Thumbnails -->
    <div class="flex gap-4">
      <% @product.images.each do |image| %>
        <%= image_tag(
          image,
          alt: @product.name,
          class: "w-20 h-20 object-cover rounded-lg cursor-pointer border-2 border-transparent hover:border-pink-500",
          data: { action: "click->gallery#show", image_url: url_for(image) }
        ) %>
      <% end %>
    </div>
  </div>

  <!-- Description -->
  <div class="p-4 bg-white shadow-lg rounded-lg">
    <h2 class="text-2xl font-semibold mb-4">Description</h2>
    <p class="text-gray-700"><%= @product.description %></p>
  </div>
</div>
